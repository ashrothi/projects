/**
 * This Package contains controllers of VERIZON API.
 */
package org.thirdparty.controllers;

/**
 * To Import Classes to access their functionality
 */
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.thirdparty.services.SIMManagementService;
import org.thirdparty.swagger.response.ApiResponseSwagger;
import io.swagger.annotations.ApiImplicitParam;
import io.swagger.annotations.ApiImplicitParams;
import io.swagger.annotations.ApiOperation;

@Controller
public class SIMManagement {
	/*
	 * Autowired is used to inject the object dependency implicitly.It's a
	 * specific functionality of spring which requires less code.
	 */
	@Autowired
	private SIMManagementService thirdPartyService;

	/**
	 * The API is used to activate SIM which means enabling voice, SMS and data
	 * service across elements of Globetouch connectivity platform.The API
	 * expects provisioning/bootstrap ICCID as mandatory attribute and returns
	 * assigned MSISDN to the SIM for the communication service on operational
	 * profile. This is async API where result/response is sent in a
	 * notification API.
	 * 
	 * @param ICCID
	 *            SIM Number of the Device to be associated to account created
	 *            for the subscriber
	 *
	 * 
	 * @param request:::To
	 *            get HTTP Basic authentication,where consumer sends the
	 *            ‘user_name’ and ‘password’ separated by ‘:’, within a base64
	 *            and requestId and returnURL from request header
	 * 
	 * @param response:::To
	 *            send response
	 * 
	 * @return Return the response message
	 * @throws Exception
	 */
	@ApiOperation(value = "/activateSIM/{ICCID}", notes = "The API is used to activate SIM which means enabling voice, SMS and data service across elements of Globetouch connectivity platform.The API expects provisioning/bootstrap ICCID as mandatory attribute and returns assigned MSISDN to the SIM for the communication service on operational profile. This is async API where result/response is sent in a notification API.", response = ApiResponseSwagger.class)
	@ApiImplicitParams({
			@ApiImplicitParam(name = "Authorization", value = "HTTP Basic authentication,where consumer sends the ‘user_name’ and ‘password’ separated by ‘:’, within a base64 ", required = true, access = "header", paramType = "header", dataType = "String"),
			@ApiImplicitParam(name = "requestId", value = "Unique ID for the transaction generated by GM system.  Expected to be returned in any associated async responses.", required = true, access = "header", paramType = "header", dataType = "String"),
			@ApiImplicitParam(name = "returnUrl", value = "URL to send async response. ", required = true, access = "header", paramType = "header", dataType = "String"),
			@ApiImplicitParam(name = "ICCID", value = "ICCID of the SIM.", required = true, access = "path", paramType = "path", dataType = "String") })
	@RequestMapping(value = "/activateSIM/{ICCID}", method = RequestMethod.POST)
	public ResponseEntity<?> activateSIM(@PathVariable String ICCID,

			HttpServletRequest request, HttpServletResponse response) throws Exception {

		ResponseEntity<?> responseMessage = thirdPartyService.activateSIM(ICCID, request, response);
		return responseMessage;

	}

}
